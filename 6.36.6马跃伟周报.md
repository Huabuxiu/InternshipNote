# 6.3-6.6马跃伟周报

## 6.3

3号中午办理入职手续后，领取了电脑和相应的办公工具，初始化域账户和OA系统，熟悉了办公系统。

## 6.4

对办公电脑进行环境配置。

* IDE ： jetbrains IDEA
* Java开发环境 : JDK1.8（64位）
* 编辑器 ：sublime Text
* WSL : Linux Ubuntu 16.04
* 数据库：MySql,Redis
* SSM/Spring BooT Demo 测试

# 6.5

熟悉公司产品业务。

### 1. 下载并使用SADPTool(设备网络搜索设备)。
核心功能获取当前局域内同网段所有在线的设备，并且可以显示设备的相关信息 。

了解其核心原理：**ONVIF协议** IPC 作为服务端，搜索程序作为客户端，进行基于UDP的组播，然后获取返回信号，获取对应的IP地址和设备信息。

WS-Discovery协议：对于一部分的网段地址进行多播发送一个Probe（探测）消息搜寻目标服务，在该探测消息中，包含相应的搜寻条件。如果目标服务满足该条件，则直接将响应ProbeMatch消息（服务自身相关的信息，包括地址）回复给客户端。

多播地址（Multicast Address）有很多，各个行业都不一样，IPC摄像头用的是239.255.255.250（端口3702）。多播地址的范围和分类可以见官方[IANA](https://www.iana.org/)（互联网地址分配机构）的说明：[IPv4 Multicast Address Space Registry](https://www.iana.org/assignments/multicast-addresses/multicast-addresses.xhtml)

尝试实现SADPTool其核心功能.

探测模块：

```java
    final static String CAST_ADDR = "239.255.255.250";
    final static int PORT = 37020;

	   DatagramSocket udpSocket = new DatagramSocket();

        InetAddress mcIPAddress = InetAddress.getByName(CAST_ADDR);

        byte[] probe = Probe.getBytes();

        dp = new DatagramPacket(probe,probe.length);

        dp.setAddress(mcIPAddress);

        dp.setPort(PORT);
		 
	   try {
            udpSocket.send(dp);
        }catch (Exception e){
            System.out.printf("嗅探失败");
            System.out.println(e.getMessage());
        }
```

接受模块：

```java 
mcSocket = new MulticastSocket(PORT);
        mcIPAddress = InetAddress.getByName(CAST_ADDR);
        System.out.println("Multicast Receiver running at:"
                + mcSocket.getLocalSocketAddress());
        mcSocket.joinGroup(mcIPAddress);


        while (true){

            DatagramPacket packet = new DatagramPacket(new byte[10240], 10240);

            System.out.println("Waiting for a  multicast message...");

            mcSocket.receive(packet);

            String msg = new String(packet.getData(), packet.getOffset(),
                    packet.getLength());
            System.out.println("[Multicast  Receiver] Received:" + msg);


        }
```



### 2. 了解4200客户端主要用途及其功能

主界面

![1559786499289](C:\Users\mayuewei\AppData\Roaming\Typora\typora-user-images\1559786499289.png)

4200是网络监控设备配套使用的控制软件，对于各类DVR，NVR，IPC提供网络服务，预览，回放，云台等操作，进行灵活部署。主要作用是数据存储，管理和分析等，主要功能有用户权限管理，分组管理，日志管理，视频设备管理，警报处理，考勤管理。

* 设备管理
* 分组管理
* 云服务平台
* 预览
* 存储计划
* 远程回放
* 录像文件下载
* 视频事件
* 事件中心
* 电子地图
* 流媒体服务器
* 数据统计
* 智能应用
* 报警主机管理
* 人员管理
* 访问控制
* 考勤管理
* 日志搜索
* 用户管理
* 系统配置

### 3. 进行视频 SDK java 开发环境配置 

运行Demo演示

项目结构

![1559788634640](C:\Users\mayuewei\AppData\Roaming\Typora\typora-user-images\1559788634640.png)

结果演示

![1559789896133](C:\Users\mayuewei\AppData\Roaming\Typora\typora-user-images\1559789896133.png)

## 6.6

阅读了SDK开发文档,了解执行流程![1559815378480](C:\Users\mayuewei\AppData\Roaming\Typora\typora-user-images\1559815378480.png)

深入学习java并发基本原理,包括 volatile、synchronize、CAS、atomic等实现原理并发布三篇博客

* [**并发实现原理**](https://blog.csdn.net/huabuxiu/article/details/91047969)
* [**用jvisualvm分析dump文件**](https://blog.csdn.net/huabuxiu/article/details/91047921)
* [**影响并发性能的原因**](https://blog.csdn.net/huabuxiu/article/details/91047854)